(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{0:function(t,e,n){t.exports=n("56d7")},"21af":function(t,e,n){},"4c43":function(t,e,n){"use strict";var o=n("d6d9");n.n(o).a},"56d7":function(t,e,n){"use strict";n.r(e),n("2bf3"),n("0dbc"),n("e612"),n("8cf6"),n("21af"),n("fd41");var o=n("6e6d"),a=(n("1a43"),n("6ac6"),n("39e0")),i=n.n(a),s=n("18b5"),r=n.n(s),l=(n("67c8"),n("cac2"),n("263e"),n("0252")),c=n.n(l),u=n("a025"),d=n("7f3d"),p=(n("e1a2"),n("b7dd"),n("7b62"),n("6c92")),h=n.n(p);function f(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function g(t){if(console.log("option",t),"undefined"!==typeof XMLHttpRequest){var e=new XMLHttpRequest,n=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var o=new FormData;t.data&&(console.log("option.data",t.data),h()(t.data).map(function(e){o.append(e,t.data[e])})),o.append(t.filename,t.file),e.onerror=function(e){console.log("xhr error",e),t.onError(e)},e.onload=function(){if(console.log("xhr.status",e,e.status),e.status<200||e.status>=300)return t.onError(function(t,e,n){var o="fail to post ".concat(t," ").concat(n.status,"'"),a=new Error(o);return a.status=n.status,a.method="post",a.url=t,a}(n,0,e),f(e));t.onSuccess(f(e))},e.open("post",n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var a=t.headers||{};for(var i in a)a.hasOwnProperty(i)&&null!==a[i]&&e.setRequestHeader(i,a[i]);console.log("formate",o),e.send(o)}}var m=n("7f43"),v=n.n(m),b={props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},interceptor:{type:Boolean,default:!1},beforeAjax:{type:Function,default:function(){return{}}}},data:function(){return{fileList:[]}},methods:{handleChange:function(t){var e=t.target.files;e&&(this.uploadFiles(e),this.$refs.input.value=null)},uploadFiles:function(t){var e=this,n=Array.prototype.slice.call(t);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach(function(t){e.upload(t)})},upload:function(t){var e=this;if(!this.beforeUpload)return this.post(t);var n=this.beforeUpload(t);n&&n.then?n.then(function(n){"[object File]"===Object.prototype.toString.call(n)?e.post(n):e.post(t)},function(){}):!1!==n&&this.post(t)},post:function(t){var e=this;if(console.log("pose",t,this.format),this.format.length){var n=t.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(function(t){return t.toLocaleLowerCase()===n}))return this.onFormatError(t,this.fileList),!1}if(console.log("flie size",t.size,t.name,t.type),this.maxSize&&t.size>1024*this.maxSize)return this.onExceededSize(t,this.fileList),!1;this.handleStart(t),console.log("interceptor",this.interceptor),this.interceptor?this.beforeAjax(this.action,Object(d.a)({},this.data,Object(u.a)({},this.name,t))):g({headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(n){e.onProgress(n,t)},onSuccess:function(n){e.onSuccess(n,t)},onError:function(n,o){e.onError(n,o,t)}})},handleStart:function(t){t.uid=c()()+this.tempIndex++;var e={status:"uploading",name:t.name,size:t.size,percentage:0,uid:t.uid,showProgress:!0};this.fileList.push(e)}}},y=n("17cc"),w=Object(y.a)(b,function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{ref:"input",staticClass:"upload-button",attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleChange}})},[],!1,null,null,null).exports,q=n("c9f4"),C=n.n(q),S=n("a3f4"),x=n.n(S),k=n("aa8d"),T=n.n(k);C.a.register("modules/imageResize",x.a);var j={data:function(){return{quill:null,html:"",title:"",_html:"",viewType:0,formUrl:"http://up-z2.qiniu.com",qiniu_store:"http://poq55glum.bkt.clouddn.com/",uploadData:{},qiniu_token:"",fullscreenLoading:!1,uploadType:"image",getTokenCallBack:null,accept:"image/*"}},created:function(){var e=this;try{this.viewType=window.viewType||0,window.WV_getHtml=function(){console.log(e.html),e.sendToRN("SUBMIT",{title:e.title,html:e.html})},window.WV_qiniuToken=function(t){console.log("token",t),e.getTokenCallBack&&e.getTokenCallBack(t)},window.WV_renderHtml=function(t){e.html=t},window.WV_undo=function(){console.log("vue 后撤",e.quill),e.quill&&e.quill.history.undo()},window.WV_redo=function(){console.log("vue 前撤"),e.quill&&e.quill.history.redo()},window.WV_qiniuUpload=function(t){console.log("上传",t),e.handleSuccess(t)}}catch(t){console.error("created error",t)}},mounted:function(){var e=this;try{var n=this;T.a.configure({languages:["JavaScript","TypeScript","HTML","XML","Java","Python","CSS","Less","SCSS","Stylus","SQL","PHP","Nginx","HTTP","Go"]}),T.a.initHighlightingOnLoad(),this.quill=new C.a(this.$refs.editor,{placeholder:"",theme:"snow",modules:{syntax:{highlight:function(t){return T.a.highlightAuto(t).value}},toolbar:{container:"#toolbar",handlers:{image:function(t){t?(document.querySelector(".upload-button").click(),console.log("value",t)):n.quill.format("image",!1)}}},imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"}}}}),this.quill.on("scroll-optimize",function(t,n,o){var a=e.$refs.editor.children[0].innerHTML;e.html=a.replace('contenteditable="true"',"")})}catch(t){console.error("mounted",t)}},methods:{sendToRN:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{window.ReactNativeWebView.postMessage(r()({type:t,data:e}))}catch(t){console.error("send to rn error",t)}},beforeAjax:function(t,e){console.log("befor ajax");var n=this,o=new FileReader;o.readAsDataURL(e.file),o.onload=function(o){console.log({e:o,url:t,data:e,base64:this.result}),n.sendToRN("UPLOAD",{url:t,data:e,base64:this.result})}},beforeUpload:function(t){return console.log("befor upload",t),this.qiniuUpload(t)},getToken:function(t,e,n,o,a){var s=this;return new i.a(function(t,a){s.sendToRN("QN_TOKEN",{});var i=s;s.getTokenCallBack=function(a){i.uploadData={key:"image/".concat(e.join("."),"_").concat(n,".").concat(o),token:a},t(i.uploadData)}})},qiniuUpload:function(t){this.fullscreenLoading=!0;var e=t.name.split("."),n=e.splice(e.length-1,1)[0],o=(new Date).getTime();return this.getToken(t,e,o,n)},handleProgress:function(t,e){console.log("handleProgress",t)},handleError:function(t,e){console.log("error",t,e)},handleSuccess:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.fullscreenLoading=!1;var o="";if("image"===this.uploadType?(console.log("handleSuccess",t),console.log("handleSuccess",e),console.log("handleSuccess",n),o=this.qiniu_store+t.key):"video"===this.uploadType&&(o=STATVIDEO+t.key),o){var a=this.quill.getSelection().index;this.quill.insertEmbed(a,this.uploadType,o,C.a.sources.USER),this.quill.setSelection(a+1)}else console.error("图片插入失败")}},components:{Upload:w}},D=(n("4c43"),Object(y.a)(j,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home",attrs:{id:"app"}},[0===t.viewType?n("div",{staticClass:"editor-box"},[t._m(0),n("div",{staticClass:"topic-title-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"topic-title",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"div-1px"}),n("div",{ref:"editor",staticClass:"quill-box"}),n("Upload",{ref:"upload",staticClass:"file-button",attrs:{multiple:"","before-ajax":t.beforeAjax,accept:t.accept,"before-upload":t.beforeUpload,"on-success":t.handleSuccess,"on-error":t.handleError,"on-progress":t.handleProgress,"max-size":2048,format:["jpg","jpeg","png","gif"],action:t.formUrl,data:t.uploadData}})],1):n("div",{staticClass:"editor-box"},[n("div",{staticClass:"quill-box quill-editor ql-container ql-snow"},[n("div",{staticClass:"ql-editor",domProps:{innerHTML:t._s(t.html)}})])])])},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"toolbar"}},[n("select",{staticClass:"ql-header"},[n("option",{attrs:{value:"1"}},[t._v("标题1")]),n("option",{attrs:{value:"2"}},[t._v("标题2")]),n("option",{attrs:{value:"3"}},[t._v("标题3")]),n("option",{attrs:{selected:""}},[t._v("正文")])]),n("button",{staticClass:"ql-bold"}),n("button",{staticClass:"ql-italic"}),n("button",{staticClass:"ql-underline"}),n("button",{staticClass:"ql-code-block"}),n("select",{staticClass:"ql-align"}),n("select",{staticClass:"ql-color"}),n("select",{staticClass:"ql-background"}),n("button",{staticClass:"ql-image"}),n("button",{staticClass:"ql-link"}),n("button",{staticClass:"ql-video"}),n("button",{staticClass:"ql-script",attrs:{value:"sub"}}),n("button",{staticClass:"ql-script",attrs:{value:"super"}})])}],!1,null,"060a4137",null).exports),_=n("d075"),E=n("edc2"),L=n("e965"),M=n("1887"),O=n("5f43"),R=n("a078"),F=n.n(R),U=n("de8e"),P=function(){function t(){Object(_.a)(this,t)}return Object(E.a)(t,[{key:"get",value:function(){throw new Error("Abstract methods must be implemented")}},{key:"post",value:function(){throw new Error("Abstract methods must be implemented")}},{key:"getTopics",value:function(){return this.get("/topics")}}]),t}();v.a.defaults.withCredentials=!0;var z=function(t){function e(t,n){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(_.a)(this,e),(o=Object(L.a)(this,Object(M.a)(e).call(this))).med=!1;var s=F.a.axios_config,r=s.baseClientURL,l=s.timeout,c=s.withCredentials,u=v.a.create(Object(d.a)({baseURL:r,timeout:l,withCredentials:c,headers:{Accept:"application/json, text/javascript, */*","Content-Type":"application/json;charset=utf-8"}},a));return t&&(u.interceptors.request.use(function(t){return t},function(t){return U.a.error(t.message||"请求失败"),i.a.reject(t)}),u.interceptors.response.use(function(t){return o.med,t.data},function(t){if(t&&t.response.status)switch(t.response.status){case 401:t.message="未授权，请登录";break;default:t.message="请求失败"}return U.a.error(t.message||"请求失败"),i.a.reject(t)})),o.http=u,o}return Object(O.a)(e,t),Object(E.a)(e,[{key:"get",value:function(t){try{return console.log("api get "+t),this.http.get(t)}catch(t){}}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("api post",t,e);var o=n.is_med,a=void 0!==o&&o,i=n.key,s=void 0===i?"":i;return this.med=a,this.key=s,this.http.post(t,r()(e))}}]),e}(P);n("27c8"),Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},Date.prototype.addTime=function(t,e){var n=this;switch(t){case"s":return new Date(Date.parse(n)+1e3*e);case"n":return new Date(Date.parse(n)+6e4*e);case"h":return new Date(Date.parse(n)+36e5*e);case"d":return new Date(Date.parse(n)+864e5*e);case"w":return new Date(Date.parse(n)+6048e5*e);case"q":return new Date(n.getFullYear(),n.getMonth()+3*e,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case"m":return new Date(n.getFullYear(),n.getMonth()+e,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case"y":return new Date(n.getFullYear()+e,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())}},Date.prototype.day_mow=function(){var t="";return t+"周"+["日","一","二","三","四","五","六"][this.getDay()]},Date.prototype.Format=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy/MM/dd hh:mm:ss",e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var A=n("5482"),H=n.n(A);o.a.config.productionTip=!1,o.a.prototype.Log=new H.a,o.a.prototype.$http=new z(!1,!0),new o.a({render:function(t){return t(D)}}).$mount("#app")},a078:function(t,e){t.exports={axios_config:{baseClientURL:"/api",timeout:"5000",withCredentials:!0},webpack_config:{bundleView:!1,imgMin:!0,alias:{components:"../components"},globalParams:{VERSION:"1.0.0"}}}},d6d9:function(t,e,n){},fd41:function(t,e,n){}},[[0,"runtimechunk~app","vendor"]]]);